@using Mkt3.Data
@inject QuestionService QuestionService;
@if (_question == null)
{
    <p>
        <em>Loading...</em>
    </p>
}
else
{
    <EditForm Model="@_question" OnValidSubmit="@HandleValidSubmit">
        <table class="table">
            <tbody>
            <tr><td>Prompt: </td><td><input @bind="@_question.Prompt"/></td></tr>
            <tr><td>Solution: </td><td><input @bind="@_question.Solution"/></td></tr>
            <tr><td>Points: </td><td>@_question.Points</td></tr>
            </tbody>
        </table>
        <button type="submit">Save</button><button type="submit" @onclick="@(async () => ResetForm())">Cancel</button>
    </EditForm>
}

@code {
    [Parameter]
    public string id { get; set; }
    [Parameter]
    public string belongsTo { get; set; }

    private ShortAnswerQuestion _question;

    protected override async Task OnInitializedAsync()
    {
        _question = await QuestionService.GetShortAnswerQuestion("foo");
   
    }
    
    private async Task HandleValidSubmit()
    {
       
        if (await QuestionService.SaveShortAnswerQuestion(_question))
        {
           // NavManager.NavigateTo(_pageState.GetGoBackPage());

        }
    }
    private void ResetForm()
    {
       /* repeater = previousState;
        NavManager.NavigateTo(_pageState.GetGoBackPage());*/
        
    }
}